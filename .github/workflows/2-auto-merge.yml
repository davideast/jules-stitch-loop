name: ‚ö° Auto-Merge Keeper
on:
  workflow_run:
    workflows: ["üõ°Ô∏è Loop Integrity Check"]
    types: [completed]
jobs:
  merge:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    permissions: { contents: write, pull-requests: write }
    steps:
      - name: Merge
        env: { GH_TOKEN: ${{ secrets.GITHUB_TOKEN }} }
        run: |
          PR=$(gh pr list --head "${{ github.event.workflow_run.head_branch }}" --json number --jq '.[0].number')
          if [ -n "$PR" ]; then gh pr merge $PR --squash --auto --delete-branch; fi